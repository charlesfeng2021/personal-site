<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Personal Site</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f4f4f4;
      color: #333;
    }
    header {
      background: #333;
      color: white;
      padding: 1rem;
      text-align: center;
    }
    main {
      max-width: 800px;
      margin: 2rem auto;
      padding: 1rem;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    h1 {
      margin-bottom: 0.5rem;
    }
    .project {
      margin: 1rem 0;
      padding: 1rem;
      border: 1px solid #ddd;
      border-radius: 6px;
    }
  </style>
</head>
<body>
  <header>
    <h1>ðŸ‘‹ Hi, I'm Charles Feng</h1>
    <p>Welcome to my personal site.</p>
	<p>LinkedIn: https://www.linkedin.com/in/shengjiefeng/</p>
  </header>

  <main>
    <section>
      <h2>About Me</h2>
      <p>3+ Yrs in market risk, 3+ Yrs in investment risk, with postgrad degrees in coding and quantative finance. This is intended to showcase my side projects</p>
    </section>

    <section>
      <h2>Projects</h2>
      <div class="project">
        <h3>Interactive Tic Tac Toe (Coming Soon)</h3>
        <div id="board" style="display:grid;grid-template-columns:repeat(3,80px);gap:5px;width:max-content;"></div>
        <p id="status"></p>
		<button id="restartBtn" style="margin-top:10px;padding:5px 10px;font-size:1rem;">Challenge again!</button>
      </div>
    </section>
  </main>

  <script>
let board = ["","","","","","","","",""];
let gameOver = false;

function renderBoard() {
  const boardDiv = document.getElementById("board");
  boardDiv.innerHTML = "";
  board.forEach((cell, i) => {
    const btn = document.createElement("button");
    btn.textContent = cell;
    btn.style.width = "80px";
    btn.style.height = "80px";
    btn.style.fontSize = "2rem";
    btn.onclick = () => playerMove(i);
    boardDiv.appendChild(btn);
  });
  checkGameOver();
}

function checkGameOver() {
  const winningCombos = [
    [0,1,2],[3,4,5],[6,7,8], // rows
    [0,3,6],[1,4,7],[2,5,8], // cols
    [0,4,8],[2,4,6]           // diagonals
  ];
  
  for (let combo of winningCombos) {
    const [a,b,c] = combo;
    if (board[a] && board[a] === board[b] && board[a] === board[c]) {
      document.getElementById("status").textContent = board[a] + " wins!";
      gameOver = true;
      return;
    }
  }

  if (!board.includes("")) {
    document.getElementById("status").textContent = "It's a draw!";
    gameOver = true;
  }
}

async function playerMove(i) {
  if (board[i] !== "" || gameOver) return;
  board[i] = "X";
  renderBoard();

  if (gameOver) return;

  // Ask backend for AI move
  let res = await fetch("http://127.0.0.1:8000/move", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({board}),
  });
  let data = await res.json();
  if (data.move >= 0) {
    board[data.move] = "O";
  }
  renderBoard();
}

// Restart game function
function restartGame() {
  board = ["","","","","","","","",""];
  gameOver = false;
  document.getElementById("status").textContent = "";
  renderBoard();
}

// Attach restart button
document.getElementById("restartBtn").onclick = restartGame;

renderBoard();
</script>
</body>